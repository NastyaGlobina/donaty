(function($){let vh=window.innerHeight*0.01;document.documentElement.style.setProperty('--vh',`${vh}px`);window.addEventListener('resize',()=>{let vh=window.innerHeight*0.01;document.documentElement.style.setProperty('--vh',`${vh}px`);});$(document).ready(function(){let spaceBetweenDesktop17=$(window).width()*0.0089;let spaceBetweenDesktop21=$(window).width()*0.0109;let spaceBetweenDesktop35=$(window).width()*0.0182;let activeSlide=1;if($('#main-slider .swiper-container').length){new Swiper('#main-slider .swiper-container',{slidesPerView:1,simulateTouch:false,loop:$('#main-slider .swiper-slide').length>1?true:false,autoplay:{delay:3000,},navigation:{nextEl:'#main-slider .swiper-button-next',prevEl:'#main-slider .swiper-button-prev',},pagination:{el:'#main-slider .swiper-pagination',type:'bullets',clickable:true,},on:{slideChange:function(){let prevSlide=$('#main-slider .swiper-slide')[activeSlide];$(prevSlide).find('.youtube-video iframe').each(function(index){$(this).attr('src',$(this).attr('src'));});activeSlide=this.activeIndex;},},});}
$('#main-slider').on('click','a',function(){dataLayer.push({'event':'slider'});})
if($('#home-slider .swiper-container').length){new Swiper('#home-slider .swiper-container',{slidesPerView:1,loop:$('#home-slider .swiper-slide').length>1?true:false,autoplay:{delay:3000,},pagination:{el:'#home-slider .swiper-pagination',type:'bullets',clickable:true,},on:{slideChange:function(){let currentSlideColor=$('#home-slider .swiper-slide[data-swiper-slide-index="'+(this.realIndex)+'"]').data('color');$('#home-slider .swiper-pagination').removeClass('black').removeClass('white').addClass(currentSlideColor);},},});}
if($('.related .swiper-container').length){new Swiper('.related .swiper-container',{slidesPerView:1,spaceBetween:20,navigation:{nextEl:'.related .swiper-button-next',prevEl:'.related .swiper-button-prev',},breakpoints:{768:{slidesPerView:'auto',spaceBetween:65,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop21,},}});}
if($('.wp-block-gallery-wrap').length){let mySwiper;$('.wp-block-gallery-wrap').each(function(){if($(this).find('.wp-block-gallery > figcaption').length){$(this).append($(this).find('.wp-block-gallery > figcaption'));}});if($(window).width()>1024){let spaceBetweenDesktop60=$(window).width()*0.0313;mySwiper=new Swiper('.wp-block-gallery-wrap',{slidesPerView:'auto',loop:true,spaceBetween:spaceBetweenDesktop60,centeredSlides:true,loopedSlides:2,autoplay:{delay:3000},slideClass:'wp-block-image',wrapperClass:'wp-block-gallery',});$(window).on('load',function(){if(mySwiper.length){mySwiper.forEach(function(item){item.slideToLoop();})}else{mySwiper.slideToLoop();}});$(window).on('scroll',function(){if(mySwiper.length){mySwiper.forEach(function(item){if(isElementInViewport(item['$el'][0])){if(!item.autoplay.running){item.slideNext();item.autoplay.start();}}else{item.autoplay.stop();}})}else{if(isElementInViewport(mySwiper['$el'][0])){mySwiper.autoplay.start();}else{mySwiper.autoplay.stop();}}})}else{mySwiper=new Swiper('.wp-block-gallery-wrap',{slidesPerView:1,loop:true,spaceBetween:17,autoHeight:true,breakpoints:{768:{spaceBetween:45,},},slideClass:'wp-block-image',wrapperClass:'wp-block-gallery',pagination:{el:'.swiper-pagination',type:'bullets',clickable:true,},});}}
$('#up').on('click',function(){$('html, body').animate({scrollTop:0},1000)});$('.scroll-down').on('click',function(){$('html, body').animate({scrollTop:$('.scroll-to').offset().top-$('.site-header ').outerHeight()},1000)});$('a.play').fancybox({media:{youtube:{params:{rel:0}}},btnTpl:{close:'<button data-fancybox-close class="fancybox-button fancybox-button--close" title="{{CLOSE}}">'+
'<svg viewBox="0 0 35 36" xmlns="http://www.w3.org/2000/svg"><path d="m.611017 35.2263c.872883.8958 2.211303.8958 3.084183 0l13.7333-14.0928 13.7334 14.0928c.8147.9555 2.1531 1.0152 3.0842.2389.931-.7763.9892-2.2095.2327-3.1649-.0582-.0597-.1164-.1792-.2327-.2389l-13.7334-14.0928 13.7334-14.09283c.8728-.83601.931-2.26918.1163-3.164914-.8146-.89573-2.2113-.955446-3.0841-.119431-.0582.059716-.0582.059716-.1164.119431l-13.7334 14.092844-13.7333-14.092844c-.87288-.836015-2.26949-.7762999-3.084183.119431-.756497.836013-.756497 2.209473 0 3.045483l13.733383 14.09283-13.733383 14.0928c-.814689.8957-.814689 2.2692 0 3.1649z" fill="#fff"/></svg>'+
"</button>",},});$('.open-tags').on('click',function(){$('.photos-tags').slideToggle('200');});if($('#news-isotope').length){var sortBy;if($(window).width()>767&&$(window).width()<1025){sortBy='tablet';}else if($(window).width()>1024){sortBy='desktop';}
var $grid=$('#news-isotope').isotope({itemSelector:'.event-post',getSortData:{tablet:'[data-order-tablet] parseFloat',desktop:'[data-order-desktop] parseFloat',},sortBy:sortBy});$(window).on('load',function(){$grid.isotope('layout');});$(window).on('resize',function(){if($(window).width()>767&&$(window).width()<1025){sortBy='tablet';}else if($(window).width()>1024){sortBy='desktop';}else{sortBy=''}
$grid.isotope({sortBy:sortBy});})}
$('.short-news-item').on('click','.blue-link',function(e){e.preventDefault();if($(this).hasClass('opened')){$(this).prev('.short-text').slideUp('300');$(this).removeClass('opened');}else{$(this).prev('.short-text').slideDown('300');$(this).addClass('opened');}});$('.share-icons a').on("click",function(e){$(this).customerPopup(e);});if($('.last-photos-slider .swiper-container').length){new Swiper('.last-photos-slider .swiper-container',{slidesPerView:1,loop:true,loopedSlides:2,spaceBetween:10,autoplay:{delay:3000,},navigation:{nextEl:'.last-photos-slider .swiper-button-next',prevEl:'.last-photos-slider .swiper-button-prev',},pagination:{el:'.last-photos-slider .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:'auto',loop:true,loopedSlides:2,centeredSlides:true,},1025:{slidesPerView:'auto',loop:true,loopedSlides:2,centeredSlides:true,spaceBetween:spaceBetweenDesktop17,},}});}
if($('#media-vocabulary .swiper-container').length){new Swiper('#media-vocabulary .swiper-container',{slidesPerView:1,spaceBetween:20,navigation:{nextEl:'#media-vocabulary .swiper-button-next',prevEl:'#media-vocabulary .swiper-button-prev',},pagination:{el:'#media-vocabulary .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,spaceBetween:30,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop35,},}});}
if($('#home-together .swiper-container').length){new Swiper('#home-together .swiper-container',{slidesPerView:1,spaceBetween:20,navigation:{nextEl:'#home-together .swiper-button-next',prevEl:'#home-together .swiper-button-prev',},breakpoints:{768:{slidesPerView:2,spaceBetween:30,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop35,},}});}
if($('.last-posts-slider .swiper-container').length){new Swiper('.last-posts-slider .swiper-container',{slidesPerView:1,spaceBetween:10,navigation:{nextEl:'.last-posts-slider .swiper-button-next',prevEl:'.last-posts-slider .swiper-button-prev',},pagination:{el:'.last-posts-slider .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,spaceBetween:30,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop35,},}});}
if($('#crimes-more').length){new Swiper('#crimes-more .swiper-container',{slidesPerView:1,spaceBetween:0,navigation:{nextEl:'#crimes-more .swiper-button-next',prevEl:'#crimes-more .swiper-button-prev',},pagination:{el:'#crimes-more .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,},1025:{slidesPerView:4,},}});}
if($('.instagram-links .swiper-container').length){new Swiper('.instagram-links .swiper-container',{slidesPerView:1,spaceBetween:10,pagination:{el:'.instagram-links .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,},1025:{slidesPerView:4,spaceBetween:spaceBetweenDesktop17,},}});}
if($('#crimes-posts .swiper-container').length){new Swiper('#crimes-posts .swiper-container',{slidesPerView:1,spaceBetween:10,pagination:{el:'#crimes-posts .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop17,},}});}
if($('.last-three-news .swiper-container').length){new Swiper('.last-three-news .swiper-container',{slidesPerView:1,spaceBetween:10,pagination:{el:'.last-three-news + .swiper-pagination',type:'bullets',clickable:true,},breakpoints:{768:{slidesPerView:2,},1025:{slidesPerView:3,spaceBetween:spaceBetweenDesktop17,},}});}
if($('#crimes-stories-more .swiper-container').length){new Swiper('#crimes-stories-more .swiper-container',{slidesPerView:1,spaceBetween:20,navigation:{nextEl:'#crimes-stories-more .swiper-button-next',prevEl:'#crimes-stories-more .swiper-button-prev',},breakpoints:{768:{slidesPerView:2,spaceBetween:20,},1025:{slidesPerView:4,spaceBetween:spaceBetweenDesktop35,},}});}
if($('#media-materials .swiper-container').length){new Swiper('#media-materials .swiper-container',{slidesPerView:1,spaceBetween:0,navigation:{nextEl:'#media-materials .swiper-button-next',prevEl:'#media-materials .swiper-button-prev',},breakpoints:{768:{slidesPerView:2,},1025:{slidesPerView:4,},}});}
if($('.media-timeline .swiper-container').length){new Swiper('.media-timeline .swiper-container',{slidesPerView:'auto',spaceBetween:10,breakpoints:{768:{spaceBetween:20,},1025:{spaceBetween:spaceBetweenDesktop35,},}});}
if($('iframe#cosmoframe').length){var detector=setInterval(function(){var elem=document.activeElement;if(elem&&elem.tagName=='IFRAME'){dataLayer.push({'event':'videoplay'});clearInterval(detector);}},100);}
$('button.search-submit').on('click',function(e){e.preventDefault();let form=$(this).parent('form');if(form.hasClass('active')){if(form.find('input').val()!=''){form.submit();}}else{$('.site-header').addClass('search-shown');form.addClass('active');}});$(window).on('click',function(){$('.site-header').removeClass('search-shown');$('form.search-form').removeClass('active');});$('form.search-form').on('click',function(e){e.stopPropagation();});if($('#ukraine-notice').length){let notice=$('#ukraine-notice');if(!getCookie('ukraine-notice-'+notice.data('notice'))){if(notice.data('notice')=='main'||notice.data('notice')=='why'){$(window).on('scroll',function(){if(!notice.hasClass('closed')){if(($(document).scrollTop()+$(window).height())>=$('footer#colophon').offset().top){notice.fadeIn('slow');}}})}else{setTimeout(function(){notice.fadeIn('slow');},10000);}}
notice.on('click','.close',function(){notice.fadeOut('slow').addClass('closed');setCookie('ukraine-notice-'+notice.data('notice'),true,30);}).on('click','a',function(){dataLayer.push({'event':'popup'});});}
$('.tooltip-icon').on('mouseenter',function(){if($(this).offset().left>$(window).width()/2){$(this).addClass('left-tooltip');}else{$(this).removeClass('left-tooltip');}});if($('.topic-select').length){$(window).on('click',function(){$('.topic-select').removeClass('toggled');});$('.topic-select').on('click',function(e){e.stopPropagation();$(this).toggleClass('toggled');});}
$('.count-item .info .icon').on('click',function(e){e.stopPropagation();const $info=$(this).parent();if(!$info.hasClass('calculated-source-position')){const $source=$info.find('.count-source');$source.css('transition','none');$info.addClass('active');$source[0].offsetHeight;const sourcePosition=$source.offset().left;const windowWidth=$(window).width();if(sourcePosition<0||(sourcePosition+$source.width()>windowWidth)){$source.addClass('left');}
$info.removeClass('active');setTimeout(function(){$source.css('transition','');},0);$info.addClass('calculated-source-position');}
setTimeout(function(){if($info.hasClass('active')){$info.removeClass('active');}else{$('.count-source').removeClass('active');$info.addClass('active');}},0);});$(window).on('click',function(){$('.count-item .info').removeClass('active');});});$.fn.customerPopup=function(e,intWidth,intHeight,blnResize){e.preventDefault();intWidth=intWidth||'500';intHeight=intHeight||'400';strResize=(blnResize?'yes':'no');var strTitle=((typeof this.attr('title')!=='undefined')?this.attr('title'):'Social Share'),strParam='width='+intWidth+',height='+intHeight+',resizable='+strResize,objWindow=window.open(this.attr('href'),strTitle,strParam).focus();};let waitAnimation=false;showAnimation();$(window).on('scroll',function(){showAnimation();if(!$('body').hasClass('page-template-crimes-page-war')&&!$('body').hasClass('page-template-food-page-war')){if($(window).scrollTop()>0){$('header#masthead ').addClass('fixed');}else{$('header#masthead ').removeClass('fixed');}}});$('#donate-see').on('click',function(){$('.donate-popup').fadeIn('slow');});$('.donate').on('click','.close',function(){$('.donate-popup').fadeOut('slow');});function showAnimation(){$('.show-animation:not(.shown)').each(function(){if(($(document).scrollTop()+$(window).height())>$(this).offset().top&&$(document).scrollTop()<($(this).offset().top+$(this).height())&&waitAnimation===false){waitAnimation=true;$(this).addClass('shown');setTimeout(function(){waitAnimation=false;showAnimation();},100);}});}
function isElementInViewport(el){if(typeof jQuery==="function"&&el instanceof jQuery){el=el[0];}
var rect=el.getBoundingClientRect();var top=false;var bottom=false;if(rect.top>=0&&rect.top<$(window).height()*0.5){top=true;}
if(rect.bottom<=$(window).height()+20&&rect.bottom>$(window).height()*0.5){bottom=true;}
if(rect.top<0&&rect.bottom>$(window).height()){return true;}
return top||bottom;}
function setCookie(cName,cValue,expDays){let date=new Date();date.setTime(date.getTime()+(expDays*24*60*60*1000));const expires="expires="+date.toUTCString();document.cookie=cName+"="+cValue+"; "+expires+"; path=/";}
function getCookie(cName){const name=cName+"=";const cDecoded=decodeURIComponent(document.cookie);const cArr=cDecoded.split('; ');let res;cArr.forEach(val=>{if(val.indexOf(name)===0)res=val.substring(name.length);})
return res;}})(jQuery);